document.getElementById('print-pdf-button').addEventListener('click', async () => {
  const pdf = new jsPDF('p', 'pt', [1242, 792]); // 11x17 inches in points (1 inch = 72 points)
  const tabs = ['main-tab', 'wiring-tab', 'space-tab', 'load-tab'];
  const scale = 1.5; // Adjust the scale as needed

  for (let i = 0; i < tabs.length; i++) {
    const tab = document.getElementById(tabs[i]);
    if (!tab) continue; // Skip if the tab doesn't exist

    try {
      // Capture the tab as an image
      const canvas = await html2canvas(tab, { 
        scale: scale,
        useCORS: true, // Enable cross-origin images
        logging: true, // Enable logging for debugging
      });

      // Convert the canvas to a data URL
      const imgData = canvas.toDataURL('image/png', 1.0);

      // Calculate dimensions for the PDF
      const imgProps = pdf.getImageProperties(imgData);
      const pdfWidth = pdf.internal.pageSize.getWidth();
      const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;

      // Add a new page for each tab (except the first one)
      if (i > 0) {
        pdf.addPage();
      }

      // Add the image to the PDF
      pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight, undefined, 'FAST');
    } catch (error) {
      console.error('Error capturing tab:', tabs[i], error);
    }
  }

  // Save the PDF
  pdf.save('panel-configuration.pdf');
});